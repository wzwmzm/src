<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="utf-8">
	<title>移动资管</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="screen-orientation" content="portrait">
	<meta name="full-screen" content="yes">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta name="apple-mobile-web-app-title" content="移动资管">
	<link rel="apple-touch-icon" href="img/favicon256.ico">

	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

	<link rel="shortcut icon" href="./img/favicon32.ico" />
	<link rel="manifest" href="./manifest.json" crossorigin="use-credentials">

	<!-- Link Swiper's CSS -->
	<link rel="stylesheet" href="./css/swiper.min.css">
	<script type="text/javascript" src="./js/instascan.js"></script>

	<!-- Demo styles -->
	<style>
		html,
        body {
            position: relative;
            height: 100%;
        }

        body {
            background: #eee;
            font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
            /*  font-size: 14px;  */
            color: #000;
            margin: 0;
            padding: 0;
        }

        .swiper-container {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            overflow: auto;
            /*		text-align: center;
 			font-size: 5rem; 
			background: #fff;
			overflow: auto;*/
            /* Center slide text vertically 
			display: -webkit-box;
			display: -ms-flexbox;
			display: -webkit-flex;
			display: flex;*/
            /*
			-webkit-box-pack: center;
			-ms-flex-pack: center;
			-webkit-justify-content: center;
			justify-content: center;
			-webkit-box-align: center;
			-ms-flex-align: center;
			-webkit-align-items: center;
			align-items: center;
			*/
        }
    </style>
	<script>




	</script>

</head>

<body>
	<!-- Swiper -->
	<div class="swiper-container">
		<div class="swiper-wrapper">

			<!-- Swiper-slide 1  设置页 -->
			<div class="swiper-slide" id="slide0">

				<div class="container-fluid">
					<div class="jumbotron jumbotron-fluid">
						<h1 class="display-4 text-center"><strong>移动资管</strong></h1>
					</div>
				</div>
				<div class="container">
					<div id="accordion">
						<div class="card">
							<div class="card-header" data-toggle="collapse" href="#collapseOne">
								<a class="card-link" href="#collapseOne">用户名: 191536</a>
							</div>
							<div id="collapseOne" class="collapse" data-parent="#accordion">
								<div class="card-body">
									<form>
										<div class="form-group">
											<label for="usr">用户名:</label>
											<input type="text" class="form-control" id="usr">
										</div>
										<div class="form-group">
											<label for="pwd">密码:</label>
											<input type="password" class="form-control" id="pwd">
										</div>
										<div class="d-flex flex-row-reverse">
											<button type="submit" class="btn btn-primary">Submit</button>
										</div>
									</form>
								</div>
							</div>
						</div>
						<div class="card">
							<div class="card-header" data-toggle="collapse" href="#collapseTwo">
								<a class="collapsed card-link" href="#collapseTwo">摄像头: <span id="cameraid_c">Camera#1</span></a>
							</div>
							<div id="collapseTwo" class="collapse" data-parent="#accordion" onblur="console.log('blur-1')" onfocus="console.log('focus-1')">
								<div class="card-body" id="cameras-div">

									<!---此处添加摄像头列表---->


									<div class="d-flex justify-content-center">
										<video id="webcamera1" playsinline autoplay controls muted loop class="rounded" style="width: 50%;"></video>
									</div>
								</div>
							</div>
						</div>
						<div class="card">
							<div class="card-header" data-toggle="collapse" href="#collapseThree">
								<a class="collapsed card-link" href="#collapseThree">用户手册</a>
							</div>
							<div id="collapseThree" class="collapse" data-parent="#accordion">
								<div class="card-body">
									#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内容：菜鸟教程 -- 学的不仅是技术，更是梦想！！！#3 内
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
			<!-- Swiper-slide 2  第一次扫描页 -->
			<div class="swiper-slide" id="slide1">

				<div class="container">
					<br /><br /><br />
					<h2> 请扫码:</h2>
					<div class="d-flex justify-content-center row align-items-center  " style="height: 50vh;">

						<video id="webcamera2" playsinline autoplay controls muted loop class="rounded" style="width: 60%; height: 50%;"></video>
					</div>
				</div>

			</div>
			<!-- Swiper-slide 3  扫描设备结果页 -->
			<div class="swiper-slide" id="slide2">



				<div class="container">
					上页扫描结果如果是设备则自动进入此页
					<h2><br /><br />设备页:<br /><br /></h2>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>
				</div>






			</div>
			<!-- Swiper-slide 4  扫描地址码-->
			<div class="swiper-slide" id="slide3">

				<div class="container">
					<br /><br /><br />
					<h2> 请地址扫码:</h2>
					<div class="d-flex justify-content-center row align-items-center  " style="height: 50vh;">

						<video id="webcamera3" playsinline autoplay controls muted loop class="rounded" style="width: 60%; height: 50%;"></video>
					</div>
				</div>






			</div>
			<!-- Swiper-slide 5  确认地址变更页-->
			<div class="swiper-slide" id="slide4">


				<div class="container">
					上页扫描地址正确后自动进入此页<br /><br />
					<h2>确认地址变更页:<br /><br /></h2>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">原位置:</p>
							<p class="card-text">T1出境15号验证台</p>
							<p class="card-text">变更为:</p>
							<p class="card-text">T1主机房备品备件库</p>
							<p class="card-text">备注: </p>
							<p class="card-text">
								<textarea class="form-control" rows="5" id="comment"></textarea>
							</p>
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</div>
				</div>




			</div>
			<!-- Swiper-slide 6  第一次扫描地址结果页-->
			<div class="swiper-slide" id="slide5">


				<div class="container">
					第一次扫描的是地址则自动进入此页<br /><br />
					<h2>T1出境15号验证台:<br /><br /></h2>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>
					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>

					<div class="card bg-light mb-3" style="max-width: 18rem;">
						<div class="card-header">
							<h5 class="card-title">
								刷卡机15
							</h5>
						</div>
						<div class="card-body">

							<p class="card-text">位置: T1出境15号验证台</p>
							<p class="card-text">型号: PM300</p>
							<p class="card-text">序列号:42523452345345</p>
							<p class="card-text">资产编号:42535235235</p>
						</div>
					</div>



				</div>






			</div>
			<!-- Swiper-slide 7 -->
			<div class="swiper-slide" id="slide6">页面 7</div>
			<!-- Swiper-slide 8 -->
			<div class="swiper-slide" id="slide7">页面 8</div>
			<!-- Swiper-slide 9 -->
			<div class="swiper-slide" id="slide8">页面 9</div>
			<!-- Swiper-slide 10 -->
			<div class="swiper-slide" id="slide9">页面 10</div>
		</div>
	</div>










	<!-- Swiper JS -->
	<script src="./js/swiper.min.js"></script>

	<!-- Initialize Swiper -->
	<script>
		//if (!(localStorage.camera_id)) localStorage.camera_id=0;
		//选用哪个摄像头,  注意:  不初始化!!!
		let n_cameras = 0; //一共有几个摄像头
		let cameras1 = null; //取得的摄像头组, 对于scanner是通用的
		var swiper = new Swiper('.swiper-container', {
			on: {
				slideChange: function() {
					console.log('改变了，activeIndex为' + this.activeIndex);
					
					switch (this.activeIndex) {
						case 0:
							x = "0 页";
							break;
						case 1:
							x = "1 页";
							$("#slide2").hide();
							break;
						case 2:
							x = "2 页";
							break;
						case 3:
							x = "3 页";
							break;
						case 4:
							x = "4 页";
							break;
						case 5:
							x = "5 页";
							$("#slide2").show();
							break;
						case 6:
							x = "6 页";
							break;
						case 7:
							x = "7 页";
							break;
						case 8:
							x = "8 页";
							break;
						case 9:
							x = "9 页";
							break;
					}
					console.log(x);
				},
			},
		});


		//////////  1,初始化第一个摄像头(设置页)
		//			与<vedio>图像输出硬关联(初始化后不能更改), 
		//			与摄像头软关联
		let scanner1 = new Instascan.Scanner({
			video: document.getElementById('webcamera1'),
			continuous: true, //持续扫描
			mirror: false, //镜像,使用前置摄像头时使用
			captureImage: false, //将图像数据作为结果的一部分
			backgroundScan: false, //选项卡未激活时是否扫描
			refractoryPeriod: 5000, //连续识别相同QR码之前的时间
			scanPeriod: 1 //两次扫描之间的周期
		});
		//      scanner1.addListener('scan', function (content) {
		//        console.log(content);       //<----扫描结果
		//                                    //<----可以调用scanner.stop()结束扫描
		//      });
		//		scanner1.addListener('inactive', function(){
		//			scanner1.stop();
		//		} )
		//		scanner1.addListener('active', function(){
		//			scanner1.start(cameras1[localStorage.camera_id]);
		//		} )

		//初始化第一次扫描摄像头
		let scanner2 = new Instascan.Scanner({
			video: document.getElementById('webcamera2'),
			continuous: true, //持续扫描
			mirror: false, //镜像,使用前置摄像头时使用
			captureImage: false, //将图像数据作为结果的一部分
			backgroundScan: false, //选项卡未激活时是否扫描
			refractoryPeriod: 5000, //连续识别相同QR码之前的时间
			scanPeriod: 1 //两次扫描之间的周期
		});

		//初始化第二次扫描摄像头
		let scanner3 = new Instascan.Scanner({
			video: document.getElementById('webcamera3'),
			continuous: true, //持续扫描
			mirror: false, //镜像,使用前置摄像头时使用
			captureImage: false, //将图像数据作为结果的一部分
			backgroundScan: false, //选项卡未激活时是否扫描
			refractoryPeriod: 5000, //连续识别相同QR码之前的时间
			scanPeriod: 1 //两次扫描之间的周期
		});

		//设置页, 摄像头列表
		Instascan.Camera.getCameras().then(function(cameras) {

			if (cameras.length > 0) {
				cameras1 = cameras; //取得摄像头列表
				// 显示 "摄像头: BisonCam, NB Pro"
				if (localStorage.camera_id) {
					$('#cameraid_c').text(cameras1[localStorage.camera_id].name);
				}
				//列表开始
				n_cameras = cameras.length;
				for (var i = n_cameras; --i >= 0;) {
					let checked = ""
					if (localStorage.camera_id == i) {
						checked = "checked"
					}

					$("#cameras-div").prepend(`
						<div class="radio text-left">
							<label><input type="radio" name="camera_op_c"  ` + checked + `  onclick="localStorage.camera_id=` + i + `;$('#cameraid_c').text(cameras1[` + i + `].name);scanner1.stop();scanner1.start(cameras1[` + i + `]);   "> ` + cameras1[i].name + `</label>
						</div>`);
				};
			} else {
				alert('No cameras found.');
			}
		}).catch(function(e) {
			alert(e);
		});

		///////2,///////
		window.onpagehide = function() {
			console.log("pagehide");
		}
		window.onpageshow = function() {
			console.log("pageshow");
		}
		window.addEventListener('blur', function() {
			console.log('window blur-2');
		});
		window.addEventListener('focus', function() {
			console.log('window focus-2');
		});
		$("#usr").focusin(function() {
			console.log("手风琴1 focusin");
		});
		$("#usr").focusout(function() {
			console.log("手风琴1 focusout");
		});
	</script>
</body>

</html>


<!---------------- 备用代码 ------------------->

<!--------https://www.swiper.com.cn/demo/index.html--------->

<!-------
<script>
	//0,初始化时的基本属性设置----------------------------


	$("#slide1").hide();


	var mySwiper = new Swiper('.swiper-container', {

		initialSlide :2,		//1,设置为2后，画面初始停在第三个Slide
		direction : 'vertical',	//2,滑动方向,(horizontal)或垂直(vertical)
		observer:true,			//3,swiper元素更新后的显示自动更新, 
								//  默认false，不开启，可以使用update()手动更新。
		on: {					//4,事件注册, 有哪些具体事件可以查看手册
				slideChange: function () {	//A,(activeIndex发生改变时)
					console.log(this.activeIndex);
				},

				slideChangeTransitionEnd: function(){//B,切换结束时
				  	alert(this.activeIndex);
				},
		},
	})

	//Swiper的一些主要属性------------------------------
	1,mySwiper.activeIndex		//返回当前活动块(激活块)的索引。
	2,mySwiper.el.style.opacity=0.5;//el, 相当于 ${} 选择器
	3,mySwiper.allowSlideNext	//设置/查看是否允许切换至下一个slide。
	4,mySwiper.allowTouchMove	//设置/查看是否禁止触摸滑动。

	//Swiper的一些主要方法------------------------------
	1,mySwiper.slideNext()		//滑动到下一滑块
	2,mySwiper.slideTo(index)	//滑动到指定滑块
	3,mySwiper.updateSlides()	//重新计算Slides的数量，当你使用js来删除slide时可能会用到。使用mySwiper.removeSlide来删除slide则会自动计算，无需使用此方法。
	4,mySwiper.update()			//更新Swiper，就像重新初始化一样
	5,mySwiper.appendSlide(slides)//添加slide到slides的结尾。
	6,mySwiper.prependSlide(slides)//添加slide到slides的第一个位置。
	7,mySwiper.addSlide(index, slides)//在指定位置增加slide
	8,mySwiper.removeSlide(index)//移除索引为index的slide。
	9,mySwiper.removeAllSlides()//移除所有slides。
	10,mySwiper.on(event,handler)//添加回调函数或者事件句柄。
	11,


	//1,添加删除页(没有更新显示)-------------------------
	//注意: 修改swiper后如果要更新显示效果,需要调Update()方法,或设置observer:true,
	swiper.appendSlide([
		'<div class="swiper-slide">Slide ' + (++appendNumber) + '</div>',
		'<div class="swiper-slide">Slide ' + (++appendNumber) + '</div>'
	]);
	
	mySwiper.removeAllSlides();      //移除全部
	mySwiper.addSlide(index, slides);//在指定位置增加
	mySwiper.appendSlide(slides);    //在尾部添加

	//2,删除页后更新显示:--------------------------------
	var mySwiper = new Swiper('.swiper-container',{
		pagination: {
			el: '.swiper-pagination',//分页器,就是几个点点
		},
		observer:true,	//<-----相当于自动初始化swiper
						//<-----默认false，不开启，可以使用update()方法更新。
	})
	$('#btn1').click(function(){
		$(".swiper-wrapper .swiper-slide1").remove();
	})

	//3,删除页后更新显示----------------------------------
	var mySwiper = new Swiper('.swiper-container',{
		pagination : '.swiper-pagination',//分页器,就是几个点点
	})
	$('#btn1').click(function(){
		$(".swiper-wrapper .swiper-slide1").remove(); 
	  mySwiper.update()	//<------更新显示(不然会有一个空白页)
	})

	//4,可以使用 div 的 显示/隐藏 属性实现页面的添加或删除(bootstrap 的辅助类show/hide)

</script>
------>
